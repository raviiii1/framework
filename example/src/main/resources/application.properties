# Server Configuration
server.port=8080

# Logging Configuration
logging.level.com.ravi9a2=DEBUG
logging.level.org.springframework=INFO

# Instrumentation Configuration
instrumentation.metrics.enabled=true
instrumentation.metrics.endpoint=console

# Downstream Service Configuration

# Reactive Service (WebClient) - user-service
downstream.user-service.baseUrl=https://jsonplaceholder.typicode.com
downstream.user-service.maxConnections=100
downstream.user-service.connectTimeout=5000
downstream.user-service.readTimeout=10000
downstream.user-service.writeTimeout=10000
downstream.user-service.inMemoryBufferSizeInKB=256

# Non-Reactive Service (HttpClient) - product-service
downstream.product-service.baseUrl=https://jsonplaceholder.typicode.com
downstream.product-service.maxConnections=50
downstream.product-service.connectTimeout=5000
downstream.product-service.readTimeout=10000
downstream.product-service.writeTimeout=10000

# gRPC Service - order-service
# Note: gRPC configuration would typically include host, port, and other gRPC-specific settings
# This is a placeholder - actual gRPC client wrapper implementation is required
downstream.order-service.host=localhost
downstream.order-service.port=50051

# Default configuration (applies to all services if not overridden)
downstream.default.maxConnections=50
downstream.default.connectTimeout=5000
downstream.default.readTimeout=10000
downstream.default.writeTimeout=10000

# Circuit Breaker Configuration
resilience4j.circuitbreaker.configs.default.failureRateThreshold=50
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState=10000
resilience4j.circuitbreaker.configs.default.slidingWindowSize=10
resilience4j.circuitbreaker.configs.default.minimumNumberOfCalls=5

resilience4j.circuitbreaker.instances.user-service-cb.baseConfig=default
resilience4j.circuitbreaker.instances.product-service-cb.baseConfig=default
resilience4j.circuitbreaker.instances.order-service-cb.baseConfig=default

# Bulkhead Configuration
resilience4j.bulkhead.configs.default.maxConcurrentCalls=10
resilience4j.bulkhead.instances.user-service-bh.baseConfig=default
resilience4j.bulkhead.instances.product-service-bh.baseConfig=default
resilience4j.bulkhead.instances.order-service-bh.baseConfig=default

# Hystrix Configuration
# Default circuit breaker configuration
hystrix.circuit-breaker.default.circuitBreakerEnabled=true
hystrix.circuit-breaker.default.circuitBreakerRequestVolumeThreshold=20
hystrix.circuit-breaker.default.circuitBreakerSleepWindowInMilliseconds=5000
hystrix.circuit-breaker.default.circuitBreakerErrorThresholdPercentage=50
hystrix.circuit-breaker.default.executionTimeoutInMilliseconds=10000
hystrix.circuit-breaker.default.executionIsolationThreadTimeoutInMilliseconds=10000
hystrix.circuit-breaker.default.executionIsolationStrategy=THREAD

# Payment service specific circuit breaker
hystrix.circuit-breaker.payment-service-cb.circuitBreakerRequestVolumeThreshold=10
hystrix.circuit-breaker.payment-service-cb.circuitBreakerErrorThresholdPercentage=30
hystrix.circuit-breaker.payment-service-cb.circuitBreakerSleepWindowInMilliseconds=3000

# Default thread pool configuration
hystrix.thread-pool.default.coreSize=10
hystrix.thread-pool.default.maximumSize=10
hystrix.thread-pool.default.maxQueueSize=-1
hystrix.thread-pool.default.keepAliveTimeMinutes=1
hystrix.thread-pool.default.queueSizeRejectionThreshold=5

# Payment service specific thread pool
hystrix.thread-pool.payment-service-bh.coreSize=15
hystrix.thread-pool.payment-service-bh.maximumSize=20
hystrix.thread-pool.payment-service-bh.maxQueueSize=100

# Payment Service Configuration (for Hystrix examples)
downstream.payment-service.baseUrl=https://jsonplaceholder.typicode.com
downstream.payment-service.maxConnections=50
downstream.payment-service.connectTimeout=5000
downstream.payment-service.readTimeout=10000
downstream.payment-service.writeTimeout=10000

